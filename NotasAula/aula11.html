
<!-- saved from url=(0075)http://www.vision.ime.usp.br/~pmiranda/mac122_2s13/aulas/aula11/aula11.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link href="./aula11_files/shCore.css" rel="stylesheet" type="text/css">
  <link href="./aula11_files/shThemeDefault.css" rel="stylesheet" type="text/css">
<style type="text/css"></style></head>

<body>

  <h2>Custo de caminhos entre cidades:</h2>

A seguir, mostraremos um exemplo de aplicação de filas para
calcular distâncias entre cidades.
Considere um conjunto de N cidades, sendo que algumas estão
interligadas por vias diretas de mão única (<b>Fig.1</b>).
Inicialmente vamos supor que todas estradas existentes possuem o mesmo custo de transporte.

<p>

<table cellpadding="10" cellspacing="0" border="0">
<tbody><tr>
<th>Fig.1</th><th>Fig.2</th><th>Fig.3</th>
</tr>
<tr>
<td><img src="./aula11_files/cidades.png" alt="" width="450"></td>
<td><img src="./aula11_files/grafo.png" alt="" width="300"></td>
<td><img src="./aula11_files/matriz.png" alt="" width="250"></td>
</tr>
</tbody></table>

</p><p>
Primeiramente vamos considerar uma camada de abstração
utilizando o conceito matemático de grafos.<br>
Um grafo orientado, ou grafo dirigido, G(<b>V</b>,<b>A</b>) é
definido pelo par de conjuntos <b>V</b> e <b>A</b>, onde: 
</p><ul>
<li><b>V</b> é um conjunto não vazio de elementos denominados 
vértices,</li>
<li><b>A</b> é um conjunto de pares ordenados de 
vértices (s,t) &#8712; <b>A</b>, s e t &#8712; <b>V</b>,
chamados arcos, ou arestas direcionadas.</li>
</ul>

Por exemplo, no nosso problema de N cidades (numeradas de 0 a N-1) 
temos o grafo da <b>Fig.2</b>, onde:
<ul>
<li><b>V</b> = {v<sub>i</sub> | v<sub>i</sub> é uma cidade} = {v<sub>0</sub>, v<sub>1</sub>, v<sub>2</sub>, v<sub>3</sub>, v<sub>4</sub>, v<sub>5</sub>}</li>
<li><b>A</b> = {(v<sub>i</sub>,v<sub>j</sub>) | existe estrada direta, indo da cidade v<sub>i</sub> para a cidade v<sub>j</sub>}</li>
</ul>

Uma das formas de representar um grafo, em linguagem C,
é através da sua matriz de adjacência (<b>Fig.3</b>).
Uma matriz de adjacência A é uma matriz quadrada NxN,
onde os valores de A[i][j] são iguais a 1 se os
vértices v<sub>i</sub> e v<sub>j</sub> 
são adjacentes, isto é, (v<sub>i</sub>,v<sub>j</sub>) &#8712; <b>A</b>, e 0 caso contrário.
<p>
Um caminho no grafo
é uma sequência de vértices adjacentes (de cada um dos 
vértices existe uma aresta para o vértice seguinte).<br>
O comprimento do caminho é o número de arestas que o caminho usa.
No nosso problema, o caminho é uma sequência de cidades, 
interligadas por vias diretas, a partir de uma cidade de origem
até uma cidade de destino.


</p><p>
A importância do uso da abstração por 
grafos reside no fato de que muitos problemas provenientes 
de diversas áreas podem ser tratados com o uso de 
algoritmos comuns em grafos, permitindo o reaproveitamento do código.

</p><p>

Para resolver o problema dos caminhos de menor comprimento a partir de uma cidade de origem,
considere o arquivo de código abaixo contendo a implementação 
de uma fila usando listas ligadas circulares.

</p><p>

<table border="1">
<tbody><tr bgcolor="#00FF00"><th>Arquivo: fila_lig.c</th></tr>
<tr><td>
  <div><div id="highlighter_722929" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="http://www.vision.ime.usp.br/~pmiranda/mac122_2s13/aulas/aula11/aula11.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">typedef</code> <code class="c keyword bold">enum</code> <code class="c plain">boolean {</code><code class="c keyword bold">false</code><code class="c plain">,</code><code class="c keyword bold">true</code><code class="c plain">} </code><code class="c color1 bold">bool</code><code class="c plain">;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="c keyword bold">typedef</code> <code class="c keyword bold">struct</code> <code class="c plain">_RegFila{</code></div><div class="line number4 index3 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">TipoDado&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dado;</code></div><div class="line number5 index4 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">struct</code> <code class="c plain">_RegFila *prox;</code></div><div class="line number6 index5 alt1"><code class="c plain">} RegFila;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="c keyword bold">typedef</code> <code class="c plain">RegFila* Fila;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="c plain">RegFila *AlocaRegFila(){</code></div><div class="line number11 index10 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">RegFila* q;</code></div><div class="line number12 index11 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q = (RegFila*)</code><code class="c functions bold">calloc</code><code class="c plain">(1, </code><code class="c keyword bold">sizeof</code><code class="c plain">(RegFila));</code></div><div class="line number13 index12 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">if</code><code class="c plain">(q==NULL) </code><code class="c functions bold">exit</code><code class="c plain">(-1);&nbsp; </code></div><div class="line number14 index13 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">return</code> <code class="c plain">q;</code></div><div class="line number15 index14 alt2"><code class="c plain">}</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="c plain">Fila&nbsp;&nbsp;&nbsp;&nbsp; CriaFila(){</code></div><div class="line number18 index17 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">Fila p;</code></div><div class="line number19 index18 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">p = AlocaRegFila();</code></div><div class="line number20 index19 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">p-&gt;prox = p;</code></div><div class="line number21 index20 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">return</code> <code class="c plain">p;</code></div><div class="line number22 index21 alt1"><code class="c plain">}</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="c keyword bold">void</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">LiberaFila(Fila p){</code></div><div class="line number25 index24 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">RegFila *q,*t;</code></div><div class="line number26 index25 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q = p-&gt;prox;</code></div><div class="line number27 index26 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">while</code><code class="c plain">(q!=p){</code></div><div class="line number28 index27 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">t = q;</code></div><div class="line number29 index28 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">q = q-&gt;prox;</code></div><div class="line number30 index29 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c functions bold">free</code><code class="c plain">(t);</code></div><div class="line number31 index30 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number32 index31 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c functions bold">free</code><code class="c plain">(p);</code></div><div class="line number33 index32 alt2"><code class="c plain">}</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="c color1 bold">bool</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">FilaVazia(Fila p){</code></div><div class="line number36 index35 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">return</code> <code class="c plain">(p==p-&gt;prox);</code></div><div class="line number37 index36 alt2"><code class="c plain">}</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="c keyword bold">void</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="c plain">InsereFila(Fila *p, TipoDado x){</code></div><div class="line number40 index39 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">RegFila *q;</code></div><div class="line number41 index40 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q = AlocaRegFila();</code></div><div class="line number42 index41 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q-&gt;dado = x;</code></div><div class="line number43 index42 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q-&gt;prox = (*p)-&gt;prox;</code></div><div class="line number44 index43 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">(*p)-&gt;prox = q;</code></div><div class="line number45 index44 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">*p = q;</code></div><div class="line number46 index45 alt1"><code class="c plain">}</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="c plain">TipoDado RemoveFila(Fila *p){</code></div><div class="line number49 index48 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">RegFila *q,*t;</code></div><div class="line number50 index49 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">TipoDado x;</code></div><div class="line number51 index50 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q = (*p)-&gt;prox;</code></div><div class="line number52 index51 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">if</code><code class="c plain">(q==*p) </code><code class="c functions bold">exit</code><code class="c plain">(-1); </code><code class="c comments">/* Fila Vazia */</code></div><div class="line number53 index52 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">t = q-&gt;prox;</code></div><div class="line number54 index53 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">x = t-&gt;dado;</code></div><div class="line number55 index54 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">q-&gt;prox = t-&gt;prox;</code></div><div class="line number56 index55 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">if</code><code class="c plain">(t==*p) *p = q;</code></div><div class="line number57 index56 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c functions bold">free</code><code class="c plain">(t);</code></div><div class="line number58 index57 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">return</code> <code class="c plain">x;</code></div><div class="line number59 index58 alt2"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>
</td></tr>
</tbody></table>


</p><h3>Comprimento dos menores caminhos a partir de uma cidade de origem:</h3>

Função que calcula os comprimentos dos menores caminhos
a partir de uma cidade de origem para as outras cidades.

  <div><div id="highlighter_961217" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="http://www.vision.ime.usp.br/~pmiranda/mac122_2s13/aulas/aula11/aula11.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c comments">/* Numero de cidades consideradas */</code></div><div class="line number2 index1 alt1"><code class="c preprocessor">#define N 6</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="c keyword bold">void</code> <code class="c plain">Comprimentos(</code><code class="c color1 bold">int</code> <code class="c plain">A[N][N], </code></div><div class="line number5 index4 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">orig, </code><code class="c color1 bold">int</code> <code class="c plain">C[N]) {</code></div><div class="line number6 index5 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">Fila f;</code></div><div class="line number7 index6 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">i,j;</code></div><div class="line number8 index7 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">f = CriaFila();</code></div><div class="line number9 index8 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">(i = 0; i &lt; N; i++)</code></div><div class="line number10 index9 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">C[i] = INT_MAX;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">C[orig] = 0;</code></div><div class="line number13 index12 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">InsereFila(&amp;f, orig);</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">while</code> <code class="c plain">( !FilaVazia(f) ) {</code></div><div class="line number16 index15 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">i = RemoveFila(&amp;f);</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">(j = 0; j &lt; N; j++) {</code></div><div class="line number19 index18 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">if</code> <code class="c plain">(A[i][j] == 1 &amp;&amp; C[j] == INT_MAX) {</code></div><div class="line number20 index19 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">C[j] = C[i] + 1;</code></div><div class="line number21 index20 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">InsereFila(&amp;f, j);</code></div><div class="line number22 index21 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number23 index22 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number24 index23 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number25 index24 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">LiberaFila(f);</code></div><div class="line number26 index25 alt1"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>


<h3>Caminho de comprimento mínimo entre cidade de origem e destino:</h3>

Função que calcula um caminho de comprimento mínimo entre uma 
cidade de origem e uma cidade de destino.

  <div><div id="highlighter_431326" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="http://www.vision.ime.usp.br/~pmiranda/mac122_2s13/aulas/aula11/aula11.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c keyword bold">void</code> <code class="c plain">Caminho(</code><code class="c color1 bold">int</code> <code class="c plain">A[N][N], </code></div><div class="line number2 index1 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">orig, </code></div><div class="line number3 index2 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">dest,</code></div><div class="line number4 index3 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">C[N],</code></div><div class="line number5 index4 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">P[N]) {</code></div><div class="line number6 index5 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">Fila f;</code></div><div class="line number7 index6 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">i,j;</code></div><div class="line number8 index7 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">f = CriaFila();</code></div><div class="line number9 index8 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">(i = 0; i &lt; N; i++) {</code></div><div class="line number10 index9 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">C[i] = INT_MAX;</code></div><div class="line number11 index10 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">P[i] = -1;</code></div><div class="line number12 index11 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">D[orig] = 0;</code></div><div class="line number15 index14 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">InsereFila(&amp;f, orig);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">while</code> <code class="c plain">( !FilaVazia(f) ) {</code></div><div class="line number18 index17 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">i = RemoveFila(&amp;f);</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">if</code> <code class="c plain">(i == dest) </code><code class="c keyword bold">break</code><code class="c plain">;</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">(j = 0; j &lt; N; j++) {</code></div><div class="line number23 index22 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">if</code> <code class="c plain">(A[i][j] == 1 &amp;&amp; C[j] == INT_MAX){</code></div><div class="line number24 index23 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">C[j] = C[i] + 1;</code></div><div class="line number25 index24 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">P[j] = i;</code></div><div class="line number26 index25 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">InsereFila(&amp;f, j);</code></div><div class="line number27 index26 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number28 index27 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number29 index28 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number30 index29 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">LiberaFila(f);</code></div><div class="line number31 index30 alt2"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>







<h3>Exemplo de função principal main:</h3>


  <div><div id="highlighter_781859" class="syntaxhighlighter  c"><div class="toolbar"><span><a href="http://www.vision.ime.usp.br/~pmiranda/mac122_2s13/aulas/aula11/aula11.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="c preprocessor">#include &lt;stdio.h&gt;</code></div><div class="line number2 index1 alt1"><code class="c preprocessor">#include &lt;stdlib.h&gt;</code></div><div class="line number3 index2 alt2"><code class="c preprocessor">#include &lt;limits.h&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="c comments">/* Numero de cidades consideradas */</code></div><div class="line number6 index5 alt1"><code class="c preprocessor">#define N 6</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="c comments">/* Para utilizar as funcoes de manipulacao de fila </code></div><div class="line number9 index8 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">presentes no arquivo fila_lig.c */</code></div><div class="line number10 index9 alt1"><code class="c keyword bold">typedef</code> <code class="c color1 bold">int</code> <code class="c plain">TipoDado;</code></div><div class="line number11 index10 alt2"><code class="c preprocessor">#include "fila_lig.c"</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="c comments">/* Inserir nesse ponto o código das demais funções anteriores */</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="c color1 bold">int</code> <code class="c plain">main() {</code></div><div class="line number18 index17 alt1"><code class="c comments">/*</code></div><div class="line number19 index18 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c comments">A[i][j] indica se existe caminho direto da </code></div><div class="line number20 index19 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c comments">cidade i para a cidade j.</code></div><div class="line number21 index20 alt2"><code class="c comments">*/</code></div><div class="line number22 index21 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">A[N][N] = {{0,0,0,0,0,0},</code></div><div class="line number23 index22 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">{0,0,1,0,0,1},</code></div><div class="line number24 index23 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">{1,0,0,0,0,0},</code></div><div class="line number25 index24 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">{0,0,1,0,0,0},</code></div><div class="line number26 index25 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">{0,1,0,0,0,1},</code></div><div class="line number27 index26 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">{1,0,0,0,0,0} };</code></div><div class="line number28 index27 alt1"><code class="c comments">/* C[i] vai armazenar o comprimento minimo de caminho</code></div><div class="line number29 index28 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">de uma cidade de origem ate a cidade i */</code></div><div class="line number30 index29 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">C[N]; </code></div><div class="line number31 index30 alt2"><code class="c comments">/* P[i] sera a cidade predecessora de i no&nbsp; </code></div><div class="line number32 index31 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">caminho otimo calculado, ou P[i] == -1 se i for</code></div><div class="line number33 index32 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">a cidade de origem */</code></div><div class="line number34 index33 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">P[N];</code></div><div class="line number35 index34 alt2"><code class="c comments">/* Vetor auxiliar temporario */</code></div><div class="line number36 index35 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">T[N]; </code></div><div class="line number37 index36 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">i,j;</code></div><div class="line number38 index37 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c color1 bold">int</code> <code class="c plain">orig, dest;</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="c comments">/* Calcula os menores valores de comprimento para</code></div><div class="line number41 index40 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">todas cidades a partir de uma cidade de origem </code></div><div class="line number42 index41 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">(cidade 4 no exemplo abaixo) */</code></div><div class="line number43 index42 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">orig = 4;</code></div><div class="line number44 index43 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">Comprimentos(A, orig, C);</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="c comments">/* Imprime os comprimentos calculados: */</code></div><div class="line number47 index46 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">(i = 0; i &lt; N; i++) {</code></div><div class="line number48 index47 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">if</code> <code class="c plain">(C[i] == INT_MAX)</code></div><div class="line number49 index48 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">" MAX"</code><code class="c plain">);</code></div><div class="line number50 index49 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c keyword bold">else</code></div><div class="line number51 index50 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">" %d"</code><code class="c plain">, C[i]);</code></div><div class="line number52 index51 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number53 index52 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"\n"</code><code class="c plain">);</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="c comments">/* Calcula um caminho de comprimento minimo entre uma </code></div><div class="line number56 index55 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">cidade de origem e uma cidade de destino fornecidas </code></div><div class="line number57 index56 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">(4 e 0 no exemplo) */</code></div><div class="line number58 index57 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">dest = 0;</code></div><div class="line number59 index58 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">Caminho(A, orig, dest, C, P);</code></div><div class="line number60 index59 alt1">&nbsp;</div><div class="line number61 index60 alt2"><code class="c comments">/* Copia as cidades percorridas no sentido inverso</code></div><div class="line number62 index61 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">(que é dado pelo mapa de predecessores) no vetor T */</code></div><div class="line number63 index62 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">j = 0;</code></div><div class="line number64 index63 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">i = dest;</code></div><div class="line number65 index64 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">while</code> <code class="c plain">( i != -1 ) {</code></div><div class="line number66 index65 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">T[j] = i;</code></div><div class="line number67 index66 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">j++;</code></div><div class="line number68 index67 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c plain">i = P[i];</code></div><div class="line number69 index68 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number70 index69 alt1">&nbsp;</div><div class="line number71 index70 alt2"><code class="c comments">/* Imprime cidades percorridas no sentido correto </code></div><div class="line number72 index71 alt1"><code class="c spaces">&nbsp;&nbsp;&nbsp;</code><code class="c comments">de orig para dest */</code></div><div class="line number73 index72 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">j--;</code></div><div class="line number74 index73 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">for</code> <code class="c plain">( ; j &gt;= 0; j--) {</code></div><div class="line number75 index74 alt2"><code class="c spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">" %d"</code><code class="c plain">, T[j]);</code></div><div class="line number76 index75 alt1"><code class="c spaces">&nbsp;&nbsp;</code><code class="c plain">}</code></div><div class="line number77 index76 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c functions bold">printf</code><code class="c plain">(</code><code class="c string">"\n"</code><code class="c plain">);</code></div><div class="line number78 index77 alt1">&nbsp;</div><div class="line number79 index78 alt2"><code class="c spaces">&nbsp;&nbsp;</code><code class="c keyword bold">return</code> <code class="c plain">0;</code></div><div class="line number80 index79 alt1"><code class="c plain">}</code></div></div></td></tr></tbody></table></div></div>

  <br>


  <h3>Custo de caminhos entre cidades em grafos com pesos nas arestas:</h3>
 
Imagine agora que o conjunto de N cidades numeradas de 0 a N-1 são
interligadas por estradas que possuem um custo de transporte
(distância, pedágios, etc). 
Nesse caso, A[i][j] pode conter,
ao invés de 1 quando houver uma aresta entre v<sub>i</sub> e 
v<sub>j</sub>, o peso dessa mesma aresta
(isto é, o custo de transporte da cidade v<sub>i</sub> 
para a cidade v<sub>j</sub>).
Valores de A[i][j] nulos são usados para indicar a ausência
de uma via direta da cidade v<sub>i</sub> para a cidade v<sub>j</sub>.
Um grafo com pesos nas arestas é chamado de grafo valorado ou grafo ponderado.

<p>
O custo de um caminho num grafo ponderado é a soma dos 
custos das arestas atravessadas.
Para encontrar de modo eficiente os caminhos de custo mínimo
podemos usar o <em>Algoritmo de Dijkstra</em>, e quando conhecemos de antemão
qual é a cidade de destino, podemos usar o <em>Algoritmo A*</em> (Lê-se: A-estrela).
Esses algoritmos são mais sofisticados e utilizam <em>filas de prioridade</em>.
Aqui iremos apenas discutir uma possível solução
menos eficiente para o problema usando filas simples (no caso quando os
pesos são valores inteiros) que reutiliza os códigos 
vistos acima.

</p><p>

A idéia é criar um grafo não-ponderado
com vértices adicionais, de modo que os comprimentos 
dos caminhos nesse novo grafo correspondam aos custos dos caminhos
para pares de vértices correspondentes no primeiro grafo.
Por exemplo, um arco de peso 3 de  v<sub>i</sub> para v<sub>j</sub>
deverá ser trocado
por três arcos não-ponderados, sendo necessária
a criação de duas cidades fictícias (vértices adicionais)
entre v<sub>i</sub> e v<sub>j</sub>.
Logo, podemos calcular os comprimentos 
dos caminhos no novo grafo, consequentemente resolvendo 
o problema dos custos do primeiro grafo ponderado.

</p><p>

  <script src="./aula11_files/shCore.js"></script>
  <script src="./aula11_files/shBrushCpp.js"></script>
  <script>
    SyntaxHighlighter.all()
  </script>




</p></body></html>